"use strict";
! function(l) {
    if (getcookie("cookiesid") && getcookie("cookienum"))
        for (var e = getcookie("cookiesid").split(","), t = getcookie("cookienum").split(","), i = 0; i < e.length; i++) n(e[i], t[i]);

    function n(n, o) {
        l.ajax({ type: "get", url: "http://localhost:8080/Project/php/goods.php", dataType: "json" }).done(function(e) {
            l.each(e, function(e, t) {
                if (n == t.id) {
                    var i = l(".modleul:hidden").clone(!0, !0);
                    i.find("#pic img").attr("src", t.pic), i.find("#pic img").attr("sid", t.id), i.find("#title").html(t.title), i.find(".cart_price").html("￥" + t.price), i.find(".numinput").val(o), i.find(".cart_subtotal").html("￥" + t.price * o), i.css("display", "block"), l(".cart_list").append(i)
                }
            }), c()
        })
    }

    function c() {
        var i = 0,
            n = 0;
        l(".modleul:visible").each(function(e, t) { l(t).find(".cart_allsel input").prop("checked") && (i += parseInt(l(t).find(".cart_quantity .numinput").val()), n += parseFloat(l(t).find(".cart_subtotal").html().substring(1))), l(".cart_tips").find(".f1 span").html(i), l(".cart_tips").find(".f3 span").html(n) })
    }
    getcookie("cookiesid") && getcookie("cookienum") ? l(".empty").hide() : l(".empty").show();
    var o = [],
        a = [];

    function s() { getcookie("cookiesid") && getcookie("cookienum") && (o = getcookie("cookiesid").split(","), a = getcookie("cookienum").split(",")) }

    function r(e) {
        s();
        var t = e.parents("ul").find(".cart_goods img").attr("sid");
        console.log(t), a[l.inArray(t, o)] = e.parents("ul").find(".numinput").val(), addcookie("cookienum", a.toString(), 10)
    }

    function d(i, e) {
        var n = -1;
        l.each(e, function(e, t) { i == t && (n = e) }), e.splice(n, 1), a.splice(n, 1), addcookie("cookiesid", e.toString(), 10), addcookie("cookienum", a.toString(), 10)
    }

    function u(e) { return parseFloat(e.parents("ul").find(".cart_price").html().substring(1)) * parseInt(e.parents("ul").find(".cart_quantity .numinput").val()) }
    l(".goodsnum .increase").click(function() {
        var e = l(this).parents(".goodsnum").find(".numinput").val();
        console.log(e), 99 <= ++e && (e = 99), l(this).parents(".goodsnum").find(".numinput").val(e), l(this).parents("ul").find(".cart_subtotal").html("￥" + u(l(this))), c(), r(l(this))
    }), l(".goodsnum .reduce").click(function() {
        var e = l(this).parents(".goodsnum").find(".numinput").val();
        console.log(e), --e <= 1 && (e = 1), l(this).parents(".goodsnum").find(".numinput").val(e), l(this).parents("ul").find(".cart_subtotal").html("￥" + u(l(this))), c(), r(l(this))
    }), l(".numinput").on("keyup", function() { var e = parseInt(l(this).val()); /^\d+$/g.test(e) ? 99 <= e ? l(this).val(99) : e <= 0 ? l(this).val(1) : l(this).val(e) : l(this).val(1), l(this).parents("ul").find(".cart_subtotal").html("￥" + u(l(this))), c(), r(l(this)) }), l("#allsel").on("change", function() { l(".modleul:visible").find(":checkbox").prop("checked", l(this).prop("checked")), l("#allsel").prop("checked", l(this).prop("checked")), c() });
    var p = l(".modleul:visible").find(".onesel:checkbox");
    l(".cart_list").on("change", p, function() { l(".modleul:visible").find(".onesel:checkbox").length == l(".modleul:visible").find(".onesel:checked").length ? l("#allsel").prop("checked", !0) : l("#allsel").prop("checked", !1), c() }), l(".cart_list").on("click", ".delbox_del", function() { s(), confirm("你确定要删除吗？") && l(this).parents("ul").remove(), d(l(this).parents("ul").find(".cart_goods img").attr("sid"), o), c(), 1 == l(".cart_list").find(".modleul").length && (l(".f1,.f3").find("span").html(" "), l(".empty").show()) }), l("#delallgoods").click(function() { s(), confirm("你确定要全部删除吗？") && (delcookie("cookiesid"), delcookie("cookienum"), l(".cart_list").find(".modleul:visible").remove(), l(".f1,.f3").find("span").html(" "), l(".empty").show()) }), l("#delselgoods").click(function() { s(), confirm("你确定要删除所选商品吗？") && l(".modleul:visible").each(function(e, t) { l(".modleul:visible").find(":checkbox").is(":checked") && (l(".modleul:visible").find(".onesel:checked").parents("ul").remove(), c(), d(l(".modleul:visible").find(".onesel:checked").parents("ul").find(".cart_goods img").attr("sid"), o)) }), 1 == l(".cart_list").find(".modleul").length && (l(".f1,.f3").find("span").html(" "), l(".empty").show()) }), l("#gobuy").click(function() { getcookie("username") ? alert("应付金额：" + l(".cart_tips").find(".f3 span").html() + "元") : confirm("请登录...") && (location.href = "http://localhost:8080/Project/src/login.html") })
}(jQuery),
function(s) {
    var e = location.search.substring(1).split("=")[1];
    s.ajax({ url: "http://localhost:8080/Project/php/detail.php", data: { sid: e }, dataType: "json" }).done(function(e) { s(".bigimg img").attr("src", e.pic1), s(".bigimg>img").attr("sid", e.id), s(".imglist li:eq(0) a img").attr("src", e.pic1), s(".imglist li:eq(1) a img").attr("src", e.pic2), s(".imglist li:eq(2) a img").attr("src", e.pic3), s(".imglist li:eq(3) a img").attr("src", e.pic4), s(".imglist li:eq(4) a img").attr("src", e.pic5), s(".info h2").html(e.title), s(".info h3").html(e.tips), s(".info #price").html("￥" + e.price), s(".info #sale").html(e.sale + "台"), s(".info #evaluate").html("已有" + e.evaluate + "人评价") });
    var i = [],
        n = [];
    s(".addcart").on("click", function() {
            var e = s(this).parents(".wrapper").find(".bigimg>img").attr("sid");
            if (getcookie("cookiesid") && getcookie("cookienum") && (i = getcookie("cookiesid").split(","), n = getcookie("cookienum").split(",")), -1 != s.inArray(e, i)) {
                var t = parseInt(n[s.inArray(e, i)]) + parseInt(s("#buynum").val());
                n[s.inArray(e, i)] = t, addcookie("cookienum", n.toString(), 10)
            } else i.push(e), addcookie("cookiesid", i.toString(), 10), n.push(s("#buynum").val()), addcookie("cookienum", n.toString(), 10);
            ! function() {
                s(".bgbox").css("display", "block"), s(".selectbox").css("display", "block"), s("#bgclose").click(function() { s(".bgbox").css("display", "none"), s(".selectbox").css("display", "none") }), s("#selectnum").html(s("#buynum").val());
                var e = s("#price").html().substring(1);
                s("#selectprice").html("￥" + e * s("#buynum").val())
            }()
        }),
        function() {
            var e = parseInt(s("#buynum").val());

            function t() { e < 1 || 1 == e ? s(".reduce").css({ cursor: "not-allowed", color: "#ccc" }) : s(".reduce").css({ cursor: "pointer", color: "#333" }) }
            s(".reduce").click(function() { e = parseInt(s("#buynum").val()), --e < 1 && (e = 1), s("#buynum").val(e), t() }), s(".increase").click(function() { e = parseInt(s("#buynum").val()), 99 < ++e && (e = 99), s("#buynum").val(e), t() }), t()
        }(),
        function() {
            var e = s(".imglist>li"),
                t = s(".bigimg img"),
                i = s(".prev"),
                n = s(".next"),
                o = 0;

            function l() { e.eq(o).addClass("active").siblings().removeClass("active"), t.attr("src", e.eq(o).find("img").attr("src")) }
            e.click(function() { o = s(this).index(), l() }), n.click(function() { 5 == ++o && (o = 0), l() }), i.click(function() {-1 == --o && (o = 4), l() })
        }(), s(".bigimg").hover(function() { s(".mouse").css("display", "block"), s(".show").css("display", "block") }, function() { s(".mouse").css("display", "none"), s(".show").css("display", "none") }), s(".bigimg").mousemove(function(e) {
            var t = s(".mouse").width(),
                i = s(".mouse").height(),
                n = s(".bigimg").width(),
                o = s(".bigimg").height(),
                e = e || window.event,
                l = e.pageX - parseInt(s(".preview").offset().left) - t / 2,
                c = e.pageY - parseInt(s(".preview").offset().top) - i / 2;
            l < 0 ? l = 0 : n - t < l && (l = n - t), c < 0 ? c = 0 : o - i < c && (c = o - i), s(".mouse").css("left", l + "px"), s(".mouse").css("top", c + "px");
            var a = s("#showimg").width() / n;
            s("#showimg").css("left", -l * a + "px"), s("#showimg").css("top", -c * a + "px")
        })
}(jQuery),
function(a) {
    ! function() {
        var e = a("#carousel ul li"),
            t = a("#carousel ol li"),
            i = a("#carousel .left"),
            n = a("#carousel .right"),
            o = 0,
            l = null;

        function c() { t.eq(o).addClass("active").siblings().removeClass("active"), e.eq(o).fadeIn(600).siblings().fadeOut() }
        clearInterval(l), a("#carousel").hover(function() { i.stop().fadeIn(400), n.stop().fadeIn(400), clearInterval(l) }, function() { i.fadeOut(400), n.fadeOut(400), l = setInterval(function() { n.click() }, 3e3) }), t.click(function() { o = a(this).index(), c() }), n.click(function() { 6 == ++o && (o = 0), c() }), i.click(function() {-1 == --o && (o = 5), c() }), l = setInterval(function() { n.click() }, 3e3)
    }(), a(window).on("scroll", function() {
        var e = a(window).scrollTop();
        400 <= e ? (a("#side_nav").show(), a("#side_bar").show()) : (a("#side_nav").hide(), a("#side_bar").hide())
    }), a("#side_nav ul li").not(":last-child").on("click", function() {
        var e = a(".content>div").not(":first-child").eq(a(this).index()).offset().top;
        a("html,body").animate({ scrollTop: e })
    }), a(".back_top").click(function() { a("html,body").animate({ scrollTop: 0 }) }), a("#side_nav ul li:last-child").click(function() { location.href = "http://localhost:8080/Project/dist/cart.html" }), a(".wrapper img").addClass("lazy").attr("data-original", function() { return a(this).attr("src") }), a("img.lazy").lazyload({ effect: "fadeIn" }), a.ajax({ type: "get", url: "http://localhost:8080/Project/php/goods2.php", dataType: "json" }).done(function(e) {
        var i = "<ul>";
        console.log(e), a.each(e, function(e, t) { i += '\n                    <li>\n                        <a href="http://localhost:8080/Project/dist/details.html?sid='.concat(t.id, '" target="_blank">\n                            <img class="lazy" data-original="').concat(t.pic, '" />                           \n                            <span class="span_price">¥').concat(t.price, "</span>\n                        </a>\n                    </li>\n                ") }), i += "</ul>", a(".floor_2_show").html(i);
        for (var t = 0; t < 2; t++) {
            var n = a(".floor_2_show").find("ul:lt(1)").clone();
            a(".floor_2_show").append(n)
        }
        a("img.lazy").lazyload({ effect: "fadeIn" })
    }), a.ajax({ type: "get", url: "http://localhost:8080/Project/php/goods.php", dataType: "json" }).done(function(e) {
        var i = "<ul>";
        e = e.slice(5), a.each(e, function(e, t) { i += '\n                    <li>\n                        <a href="http://localhost:8080/Project/dist/details.html?sid='.concat(t.id, '" target="_blank">\n                            <img class="lazy" data-original="').concat(t.pic, '"/>\n                            <span class="span_title">').concat(t.title, '</span>\n                            <span class="span_price">¥').concat(t.price, "</span>\n                        </a>\n                    </li>\n                ") }), i += "</ul>", a(".floor_8_list").html(i);
        for (var t = 0; t < 2; t++) {
            var n = a(".floor_8_list").find("ul li:lt(8)").clone();
            a(".floor_8_list").children("ul").append(n)
        }
        a("img.lazy").lazyload({ effect: "fadeIn" })
    })
}(jQuery),
function(l) {
    function e() {
        for (var e, t = [], i = "", n = 0; n < 4; n++) 48 <= (e = Math.floor(123 * Math.random())) && e <= 57 || 65 <= e && e <= 90 || 97 <= e && e <= 122 ? t[n] = e : n--;
        for (var o = 0; o < 4; o++) i += String.fromCharCode(t[o]);
        l("#codeval").html(i)
    }
    e(), l("#codebtn").click(function() { e() }), l("#code").blur(function() { l("#codeval").html().toUpperCase() === l("#code").val().toUpperCase() ? l("#code").parent("li").find("em").html("√").css({ "font-weight": "700", color: "green" }) : (l("#code").parent("li").find("em").html("验证码不正确").css({ "font-weight": "400", color: "red" }), e()) }), l("#username1").blur(function() { l.ajax({ type: "post", url: "http://localhost:8080/Project/php/login_username.php", data: { username: l("#username1").val() }, dataType: "json", success: function(e) { e.res ? l("#username1").parent("li").find("em").html("").css({ "font-weight": "700", color: "green" }) : l("#username1").parent("li").find("em").html(e.msg).css({ "font-weight": "400", color: "red" }) } }) }), l(".login_btn").click(function() {
        var t, i = 0,
            n = 3,
            e = { username: l("#username1").val(), password: l("#password1").val() };
        l.each(l(".list em"), function(e, t) { "√" == t.innerHTML && i++ }), console.log(i), 1 == i ? l.ajax({ type: "post", url: "http://localhost:8080/Project/php/login.php", data: e, dataType: "json" }).done(function(e) { e.res ? (addcookie("username", l("#username1").val(), 7), l(".bgbox").css("display", "block"), t = setInterval(function() { l("#bgval").html(n), --n < 0 && (clearInterval(t), location.href = "http://localhost:8080/Project/dist/") }, 800)) : alert(e.msg) }) : alert("请填写正确的密码和验证码")
    })
}(jQuery),
function(l) {
    function e() {
        for (var e, t = [], i = "", n = 0; n < 4; n++) 48 <= (e = Math.floor(123 * Math.random())) && e <= 57 || 65 <= e && e <= 90 || 97 <= e && e <= 122 ? t[n] = e : n--;
        for (var o = 0; o < 4; o++) i += String.fromCharCode(t[o]);
        l("#codeval").html(i)
    }
    e(), l("#codebtn").click(function() { e() });
    var t = { name: /^[a-zA-z]\w{3,15}$/, mobile: /^1[35789]\d{9}$/, emali: /^([\w][\w\-\.]+)\@([\w][\w\-\.]+)\.([\w][\w\-\.]+)$/, password: /^[a-zA-Z]\w{5,17}$/ };
    l("#password").blur(function() { t.password.test(l("#password").val()) ? l("#password").parent("li").find("em").html("√").css({ "font-weight": "700", color: "green" }) : l("#password").parent("li").find("em").html("以字母开头，长度在6~18之间，只能包含字符、数字和下划线").css({ "font-weight": "400", color: "red" }) }), l("#confirm").blur(function() { l("#confirm").val() == l("#password").val() && 6 <= l("#confirm").val().length ? l("#confirm").parent("li").find("em").html("√").css({ "font-weight": "700", color: "green" }) : l("#confirm").parent("li").find("em").html("密码必须一致且不少于6位数").css({ "font-weight": "400", color: "red" }) }), l("#code").blur(function() { l("#codeval").html().toUpperCase() === l("#code").val().toUpperCase() ? l("#code").parent("li").find("em").html("√").css({ "font-weight": "700", color: "green" }) : (l("#code").parent("li").find("em").html("验证码不正确").css({ "font-weight": "400", color: "red" }), e()) }), l("#username").blur(function() { t.name.test(l("#username").val()) || t.emali.test(l("#username").val()) || t.mobile.test(l("#username").val()) ? l("#username").parent("li").find("em").html("√").css({ "font-weight": "700", color: "green" }) : l("#username").parent("li").find("em").html("请输入正确的格式").css({ "font-weight": "400", color: "red" }), "√" == l("#username").parent("li").find("em").html() && l.ajax({ type: "post", url: "http://localhost:8080/Project/php/login_username.php", data: { username: l("#username").val() }, dataType: "json", success: function(e) { e.res ? l("#username").parent("li").find("em").html("抱歉，该用户名已存在").css({ "font-weight": "400", color: "red" }) : l("#username").parent("li").find("em").html("该用户名可以使用").css({ "font-weight": "700", color: "green" }) } }) }), l(".registor_btn").click(function() {
        var t, i = 0,
            n = 3,
            e = { username: l("#username").val(), password: l("#password").val() };
        l.each(l(".list em"), function(e, t) { "√" == t.innerHTML && i++ }), console.log(i), 3 == i && l("#cheksel").is(":checked") ? l.ajax({ type: "post", url: "http://localhost:8080/Project/php/registor.php", data: e, dataType: "json", success: function(e) { e.res ? (l(".bgbox").css("display", "block"), t = setInterval(function() { l("#bgval").html(n), --n < 0 && (clearInterval(t), location.href = "http://localhost:8080/Project/dist/") }, 800)) : alert("抱歉，该用户名已存在") } }) : alert("请填写正确的格式并勾选同意")
    })
}(jQuery);